--회원정보 테이블-

CREATE TABLE member(
mno NUMBER(4)													
    CONSTRAINT MEM_NO_PK PRIMARY KEY,
name VARCHAR2(20)					
    CONSTRAINT MEM_NAME_NN NOT NULL,
id VARCHAR2(20)						
    CONSTRAINT MEM_ID_UK UNIQUE
    CONSTRAINT MEM_ID_NN NOT NULL,
pw VARCHAR2(20) 						
    CONSTRAINT MEM_PW_NN NOT NULL,                     
tel VARCHAR2(13)                                         		
    CONSTRAINT MEM_TEL_UK UNIQUE
    CONSTRAINT MEM_TEL_NN NOT NULL,
email VARCHAR2(30)					
    CONSTRAINT MEM_MAI_UK UNIQUE
    CONSTRAINT MEM_MAI_NN NOT NULL,
gen CHAR(1)						
    CONSTRAINT MEM_GEN_NN NOT NULL
    CONSTRAINT MEM_GEN_CK CHECK(gen IN('M', 'F')),
birth CHAR(10)                 					
    CONSTRAINT MEM_BIR_NN NOT NULL,
jdate DATE default sysdate,					
                                                        
isShow CHAR(1) default 'Y'						
    CONSTRAINT MEM_IS_CK CHECK(isShow IN('Y', 'N'))
);

ALTER TABLE member
MODIFY isShow CONSTRAINT MEM_IS_NN NOT NULL;

--이미지 테이블--
CREATE TABLE image(
ino NUMBER(4)													
    CONSTRAINT IMG_NO_PK PRIMARY KEY,
isavename VARCHAR2(50)					
    CONSTRAINT IMG_NAME_NN NOT NULL,
idir VARCHAR2(20)						
    CONSTRAINT IMG_DIR_NN NOT NULL
);


--지역 테이블--
CREATE TABLE loc(
lono NUMBER(2)													
    CONSTRAINT LOC_NO_PK PRIMARY KEY,
loname VARCHAR2(20)     					
    CONSTRAINT LOC_NAME_NN NOT NULL
);


--FAQ게시판 테이블--
CREATE TABLE fboard(
fbno NUMBER(4)													
    CONSTRAINT FAQ_NO_PK PRIMARY KEY,
fbtitle VARCHAR2(50)					
    CONSTRAINT FAQ_TIT_NN NOT NULL,
fbbody VARCHAR2(4000)					
    CONSTRAINT FAQ_BOD_NN NOT NULL,
fbdate DATE default sysdate					
    CONSTRAINT FAQ_DAT_NN NOT NULL,                                                       			 
isShow CHAR(1) default 'Y'						
    CONSTRAINT FAQ_IS_CK CHECK(isShow IN('Y', 'N'))
    CONSTRAINT FAQ_IS_NN NOT NULL
);


--공지사항 게시판 테이블--
CREATE TABLE nboard(
nno NUMBER(4)													
    CONSTRAINT NOT_NO_PK PRIMARY KEY,
ntitle VARCHAR2(50)					
    CONSTRAINT NOT_TIT_NN NOT NULL,
nbody VARCHAR2(4000)					
    CONSTRAINT NOT_BOD_NN NOT NULL,
ndate DATE default sysdate					
    CONSTRAINT NOT_DAT_NN NOT NULL,
                                                        			
isShow CHAR(1) default 'Y'						
    CONSTRAINT NOT_IS_CK CHECK(isShow IN('Y', 'N'))
    CONSTRAINT NOT_IS_NN NOT NULL
);


--전시분류테이블-
CREATE TABLE exclass(
ecno NUMBER(1)													
    CONSTRAINT EXC_NO_PK PRIMARY KEY,
ecnaming VARCHAR2(8)					
    CONSTRAINT EXC_NAME_NN NOT NULL
);    

--포인트테이블--
CREATE TABLE point(
pcode NUMBER(6) 
    CONSTRAINT PNT_COD_PK PRIMARY KEY,
pmno NUMBER(4) 
    CONSTRAINT PNT_PMNO_FK REFERENCES member(mno)
    CONSTRAINT PNT_PMNO_NN NOT NULL,
spoint NUMBER(10)
    CONSTRAINT PNT_SAVEP_NN NOT NULL,
depoint NUMBER(10) 
    CONSTRAINT PNT_DEDUCP_NN NOT NULL,
repoint NUMBER(10)
    CONSTRAINT PNT_RETENP_NN NOT NULL,
pdate DATE default sysdate
    CONSTRAINT PNT_PDATE_NN NOT NULL    

);

--전시장 테이블--
CREATE TABLE explace(
expno NUMBER(4)
    CONSTRAINT EXP_PNO_PK PRIMARY KEY,
explono NUMBER(4)
    CONSTRAINT EXP_PLNO_FK REFERENCES loc(lono)
    CONSTRAINT EXP_PLNO_NN NOT NULL,
expname VARCHAR2(20)
    CONSTRAINT EXP_EPNAME_UK UNIQUE
    CONSTRAINT EXP_EPNAME_NN NOT NULL,
exptime VARCHAR2(12),
expsite VARCHAR2(50)
    CONSTRAINT EXP_SITE_NN NOT NULL,
exptel VARCHAR2(15)
    CONSTRAINT EXP_TEL_UK UNIQUE
    CONSTRAINT EXP_TEL_NN NOT NULL
);    
----------컬럼추가 & --------------------------------------------------------------
ALTER TABLE explace 
ADD exploc VARCHAR2(100); 

ALTER TABLE explace
MODIFY exploc CONSTRAINT EXP_LOC_NN NOT NULL;

ALTER TABLE explace DROP CONSTRAINT EXP_TEL_NN;
ALTER TABLE explace DROP CONSTRAINT EXP_SITE_NN;

ALTER TABLE explace 
MODIFY expname VARCHAR2(50);

ALTER TABLE explace 
MODIFY expsite VARCHAR2(100);



-------------------------------------------------------------------------------



--전시정보 테이블--
CREATE TABLE exinfo(
exino NUMBER(5) 
    CONSTRAINT EXI_NO_PK PRIMARY KEY,
exiecno NUMBER(1)
    CONSTRAINT EXI_IECNO_FK REFERENCES exclass(ecno)
    CONSTRAINT EXI_IECNO_NN NOT NULL,
exiperson VARCHAR2(20)
    CONSTRAINT EXI_PER_NN NOT NULL,
exiname VARCHAR2(150)
    CONSTRAINT EXI_NAME_NN NOT NULL,
exisdate DATE 
    CONSTRAINT EXI_SDATE_NN NOT NULL,
exiedate DATE
    CONSTRAINT EXI_EDATE_NN NOT NULL,
exiprice NUMBER(5)
    CONSTRAINT EXI_EXP_NN NOT NULL,
exiage VARCHAR2(10),
exiexpno NUMBER(4)
    CONSTRAINT EXI_PNO_FK REFERENCES explace (expno)
    CONSTRAINT EXI_PNO_NN NOT NULL,
isShow CHAR(1) DEFAULT 'Y'
    CONSTRAINT EXI_SHOW_CK CHECK(isShow IN ('Y','N'))
    CONSTRAINT EXI_SHOW_NN NOT NULL
);

--문의 게시판 테이블--
CREATE TABLE iqboard(
iqbno NUMBER(5)
    CONSTRAINT IQB_NO_PK PRIMARY KEY,
iqmno NUMBER(4)
    CONSTRAINT IQB_MNO_FK REFERENCES member(mno)
    CONSTRAINT IQB_MNO_NN NOT NULL,
iqtitle VARCHAR2(50)
    CONSTRAINT IQB_TITLE_NN NOT NULL,
iqbody VARCHAR2(4000)
    CONSTRAINT IQB_BODY_NN NOT NULL,
isShow CHAR(1) DEFAULT 'Y'
    CONSTRAINT IQB_SHOW_CK CHECK(isShow IN ('Y','N'))
    CONSTRAINT IQB_SHOW_NN NOT NULL
);
    
--리뷰 게시판 테이블--
CREATE TABLE rboard(
rbno NUMBER(5)
    CONSTRAINT REB_NO_PF PRIMARY KEY,
rbmno NUMBER(4)
    CONSTRAINT REB_MNO_FK REFERENCES member(mno)
    CONSTRAINT REB_MNO_NN NOT NULL,
rbdate DATE DEFAULT SYSDATE,
rbtitle VARCHAR2(50)
    CONSTRAINT REB_TITLE_NN NOT NULL,
rbbody VARCHAR2(4000)
    CONSTRAINT REB_BODY_NN NOT NULL,
rbview NUMBER(10)
    CONSTRAINT REB_VIEW_NN  NOT NULL,
star NUMBER(1)
    CONSTRAINT REB_STAR_NN NOT NULL,
isShow CHAR(1) DEFAULT 'Y'
    CONSTRAINT REB_SHOW_CK CHECK(isShow IN('Y','N'))
    CONSTRAINT REB_SHOW_NN NOT NULL
);

--찜 목록 테이블--
CREATE TABLE interested(
intno NUMBER(5)
    CONSTRAINT INT_NO_PK PRIMARY KEY,
intmno NUMBER(4)
    CONSTRAINT INT_MNO_FK REFERENCES member(mno)
    CONSTRAINT INT_MNO_NN NOT NULL,
intexno NUMBER(5)
    CONSTRAINT INT_EXNO_FK REFERENCES exinfo(exino)
    CONSTRAINT INT_EXNO_NN NOT NULL,
isShow CHAR(1) DEFAULT 'Y'
    CONSTRAINT INT_SHOW_CK CHECK(isShow IN('Y','N'))
    CONSTRAINT INT_SHOW_NN NOT NULL
);

--결제 테이블--
CREATE TABLE pay(
pno NUMBER(6) 
    CONSTRAINT PAY_NO_PK PRIMARY KEY,
pmno NUMBER(4)
    CONSTRAINT PAY_MNO_FK REFERENCES member(mno)
    CONSTRAINT PAY_MNO_NN NOT NULL,
ppcode NUMBER(6)
    CONSTRAINT PAY_PCODE_FK REFERENCES point(pcode)
    CONSTRAINT PAY_PCODE_NN NOT NULL,
ptno NUMBER(4)
    CONSTRAINT PAY_TNO_UK UNIQUE
    CONSTRAINT PAY_TNO_NN NOT NULL,
capay VARCHAR2(8)    
    CONSTRAINT PAY_CARD_NN NOT NULL,
popay VARCHAR2(8)
    CONSTRAINT PAY_POINT_NN NOT NULL,
ptotal VARCHAR2(10)
    CONSTRAINT PAY_TOTAL_NN NOT NULL,
paydate DATE DEFAULT SYSDATE
    CONSTRAINT PAY_DATE_NN NOT NULL
);

--결제 취소 테이블--
CREATE TABLE paycancle(
pcno NUMBER(6)
    CONSTRAINT PC_NO_PK PRIMARY KEY,
pcpno NUMBER(6)  
    CONSTRAINT PC_PCPNO_FK REFERENCES pay(pno)
    CONSTRAINT PC_PCPNO_NN NOT NULL,
pcreqd DATE DEFAULT SYSDATE,
pcresd DATE DEFAULT SYSDATE,
pccapay VARCHAR2(8)  
    CONSTRAINT PC_CPAY_NN NOT NULL,
pcpopay VARCHAR2(8)  
    CONSTRAINT PC_PPAY_NN NOT NULL,
pctotal VARCHAR2(8)
    CONSTRAINT PC_TOTAL_NN NOT NULL
);

--전시 이벤트 테이블--
CREATE TABLE event(
evtno NUMBER(4)
    CONSTRAINT EVT_NO_PK PRIMARY KEY,
evtexno NUMBER(5)
    CONSTRAINT EVT_EXNO_FK REFERENCES exinfo(exino)
    CONSTRAINT EVT_EXNO_NN NOT NULL,
evtcode CHAR(1)
    CONSTRAINT EVT_CODE_CK CHECK(evtcode IN('D','P'))
    CONSTRAINT EVT_CODE_NN NOT NULL,
evtcontent VARCHAR2(100)
    CONSTRAINT EVT_CONT_NN NOT NULL,
sdate DATE
    CONSTRAINT EVT_SDATE_NN NOT NULL,
edate DATE
    CONSTRAINT EVT_EDATE_NN NOT NULL,
isShow CHAR(1)
    CONSTRAINT EVT_SHOW_CK CHECK(isShow IN ('Y','N'))
    CONSTRAINT EVT_SHOW_NN NOT NULL       
);


